<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Workflow · QInsControl.jl</title><script data-outdated-warner src="../assets/warner.js"></script><link rel="canonical" href="https://FaresX.github.io/QInsControl.jl/Workflow/"/><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">QInsControl.jl</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li class="is-active"><a class="tocitem" href>Workflow</a><ul class="internal"><li><a class="tocitem" href="#auto-detect"><span>auto-detect</span></a></li><li><a class="tocitem" href="#muanully-add"><span>muanully add</span></a></li><li class="toplevel"><a class="tocitem" href="#Control-the-Instruments"><span>Control the Instruments</span></a></li><li><a class="tocitem" href="#sweep"><span>sweep</span></a></li><li><a class="tocitem" href="#set"><span>set</span></a></li><li><a class="tocitem" href="#read"><span>read</span></a></li><li class="toplevel"><a class="tocitem" href="#Data-Aquiring"><span>Data Aquiring</span></a></li><li><a class="tocitem" href="#Edit-script"><span>Edit script</span></a></li><li><a class="tocitem" href="#note"><span>note</span></a></li><li><a class="tocitem" href="#Example"><span>Example</span></a></li><li><a class="tocitem" href="#plot-data"><span>plot data</span></a></li><li class="toplevel"><a class="tocitem" href="#Data-Reviewing"><span>Data Reviewing</span></a></li></ul></li><li><a class="tocitem" href="../New Instrument/">New Instrument</a></li><li><a class="tocitem" href="../Tips/">Tips</a></li><li><a class="tocitem" href="../QInsControlCore/">QInsControlCore</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Workflow</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Workflow</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/FaresX/QInsControl.jl/blob/master/docs/src/Workflow.md#" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Add-Instruments"><a class="docs-heading-anchor" href="#Add-Instruments">Add Instruments</a><a id="Add-Instruments-1"></a><a class="docs-heading-anchor-permalink" href="#Add-Instruments" title="Permalink"></a></h1><h2 id="auto-detect"><a class="docs-heading-anchor" href="#auto-detect">auto-detect</a><a id="auto-detect-1"></a><a class="docs-heading-anchor-permalink" href="#auto-detect" title="Permalink"></a></h2><p>One can click on &quot;自动查询&quot; to auto-detect the available instruments in NI MAX. </p><p><img src="../assets/auto-detect.png" alt="image"/></p><h2 id="muanully-add"><a class="docs-heading-anchor" href="#muanully-add">muanully add</a><a id="muanully-add-1"></a><a class="docs-heading-anchor-permalink" href="#muanully-add" title="Permalink"></a></h2><p>Or manually add an instrument through clicking on &quot;手动输入&quot; after filling the address and clicking on &quot;添加&quot; in the end. </p><p><img src="../assets/manually-add.png" alt="image"/></p><h1 id="Control-the-Instruments"><a class="docs-heading-anchor" href="#Control-the-Instruments">Control the Instruments</a><a id="Control-the-Instruments-1"></a><a class="docs-heading-anchor-permalink" href="#Control-the-Instruments" title="Permalink"></a></h1><p>Once adding instruments finishes, one can click &quot;仪器设置和状态&quot; to query the state of specific instrument or set it. The controllable variables are classified by three types: sweep, set, read. </p><h2 id="sweep"><a class="docs-heading-anchor" href="#sweep">sweep</a><a id="sweep-1"></a><a class="docs-heading-anchor-permalink" href="#sweep" title="Permalink"></a></h2><p>For the sweepable variables, it can be swept from the present value to the given value with difinite step size and delay.</p><p><img src="assets/control%20-%20sweep.png" alt="image"/></p><h2 id="set"><a class="docs-heading-anchor" href="#set">set</a><a id="set-1"></a><a class="docs-heading-anchor-permalink" href="#set" title="Permalink"></a></h2><p>For the settable variables, it can be set by the given value through inputing or simply clicking on a pre-defined optional  value.</p><p><img src="assets/control%20-%20set.png" alt="image"/></p><h2 id="read"><a class="docs-heading-anchor" href="#read">read</a><a id="read-1"></a><a class="docs-heading-anchor-permalink" href="#read" title="Permalink"></a></h2><p>For the readable variables, it can be only queried.</p><p><img src="assets/control%20-%20read.png" alt="image"/></p><p>All these variables support selecting unit and whether it will auto update the state itself.</p><h1 id="Data-Aquiring"><a class="docs-heading-anchor" href="#Data-Aquiring">Data Aquiring</a><a id="Data-Aquiring-1"></a><a class="docs-heading-anchor-permalink" href="#Data-Aquiring" title="Permalink"></a></h1><p>Clicking on &quot;仪器 -&gt; 数据采集&quot; to do data aquiring</p><p><img src="../assets/DAQ.png" alt="image"/></p><p>&quot;工作区&quot; : select root folder for saving data. Data will be stored as</p><pre><code class="nohighlight hljs">root folder/year/month/day/[time] task name.qdt</code></pre><p>&quot;任务 1&quot; : represent a task script to aquire data. One can click it to edit the script or right click for more options.</p><p>microchip : click it to edit circuit for recording measurement configuration.</p><p>&quot;全部运行&quot; : run all the available tasks in a top-down order</p><p>&quot;暂停&quot; : suspend the running task</p><p>&quot;中断&quot; : stop the running task</p><h2 id="Edit-script"><a class="docs-heading-anchor" href="#Edit-script">Edit script</a><a id="Edit-script-1"></a><a class="docs-heading-anchor-permalink" href="#Edit-script" title="Permalink"></a></h2><h3 id="CodeBlock"><a class="docs-heading-anchor" href="#CodeBlock">CodeBlock</a><a id="CodeBlock-1"></a><a class="docs-heading-anchor-permalink" href="#CodeBlock" title="Permalink"></a></h3><p><img src="../assets/CodeBlock.png" alt="image"/></p><p>It can be input with any julia codes. It is helpful when dealing with complicated relation between variables and it supports all the grammar of julia language.</p><h3 id="StrideCodeBlock"><a class="docs-heading-anchor" href="#StrideCodeBlock">StrideCodeBlock</a><a id="StrideCodeBlock-1"></a><a class="docs-heading-anchor-permalink" href="#StrideCodeBlock" title="Permalink"></a></h3><p><img src="../assets/StrideCodeBlock.png" alt="image"/></p><p>It is similar to CodeBlock, but it can only be input a block title codes such as <em>for end</em>, <em>begin end</em>, <em>function end</em> and so on. It is used to combine block codes in julia with other blocks in QInsControl.</p><h3 id="SweepBlock"><a class="docs-heading-anchor" href="#SweepBlock">SweepBlock</a><a id="SweepBlock-1"></a><a class="docs-heading-anchor-permalink" href="#SweepBlock" title="Permalink"></a></h3><p><img src="../assets/SweepBlock.png" alt="image"/></p><p>It is used to sweep a sweepable quantity. One can click to select the specific instrument, address and quantity and input step, destination and delay. A sweepable quantity is generally dimensioned and one have to make sure that a  correct unit is selected.</p><h3 id="SettingBlock"><a class="docs-heading-anchor" href="#SettingBlock">SettingBlock</a><a id="SettingBlock-1"></a><a class="docs-heading-anchor-permalink" href="#SettingBlock" title="Permalink"></a></h3><p><img src="../assets/SettingBlock.png" alt="image"/></p><p>Similar to SweepBlock but for a settable quantity (a sweepable quantity is also a settable quantity). One can input a string or a number dependent on the unit. When unit type is none, it only supports a string input and a &quot;$(Expr(:incomplete, &quot;incomplete: invalid string syntax&quot;))</p><h3 id="ReadingBlock"><a class="docs-heading-anchor" href="#ReadingBlock">ReadingBlock</a><a id="ReadingBlock-1"></a><a class="docs-heading-anchor-permalink" href="#ReadingBlock" title="Permalink"></a></h3><p><img src="../assets/ReadingBlock.png" alt="image"/></p><p>&quot;索引&quot; is used to split the data by &quot;,&quot;. When data do not include delimiter, leave it blank. &quot;标注&quot; is used to name the  recorded data. When data format includes delimiter, one can use &quot;,&quot; to seperate multiple marks.</p><h3 id="LogBlock"><a class="docs-heading-anchor" href="#LogBlock">LogBlock</a><a id="LogBlock-1"></a><a class="docs-heading-anchor-permalink" href="#LogBlock" title="Permalink"></a></h3><p><img src="../assets/LogBlock.png" alt="image"/></p><p>When it is executed, all the available instruments will be logged. (before and after script runing, a logging action  will happen, so it is not necessary to add this block in the first and last line of a script)</p><h3 id="WriteBlock"><a class="docs-heading-anchor" href="#WriteBlock">WriteBlock</a><a id="WriteBlock-1"></a><a class="docs-heading-anchor-permalink" href="#WriteBlock" title="Permalink"></a></h3><p><img src="../assets/WriteBlock.png" alt="image"/></p><p>Input the command and write to the specified instrument.</p><h3 id="QueryBlock"><a class="docs-heading-anchor" href="#QueryBlock">QueryBlock</a><a id="QueryBlock-1"></a><a class="docs-heading-anchor-permalink" href="#QueryBlock" title="Permalink"></a></h3><p><img src="../assets/QueryBlock.png" alt="image"/></p><p>Input the command and query the specified instrument.</p><h3 id="ReadBlock"><a class="docs-heading-anchor" href="#ReadBlock">ReadBlock</a><a id="ReadBlock-1"></a><a class="docs-heading-anchor-permalink" href="#ReadBlock" title="Permalink"></a></h3><p><img src="../assets/ReadBlock.png" alt="image"/></p><p>Read the specified instrument.</p><h3 id="SaveBlock"><a class="docs-heading-anchor" href="#SaveBlock">SaveBlock</a><a id="SaveBlock-1"></a><a class="docs-heading-anchor-permalink" href="#SaveBlock" title="Permalink"></a></h3><p><img src="../assets/SaveBlock.png" alt="image"/></p><p>It is used to save a variable defined in the context. &quot;标注&quot; is an optional input to specify the name to be stored. When it is blank, the name will be the same as the variable.</p><h2 id="note"><a class="docs-heading-anchor" href="#note">note</a><a id="note-1"></a><a class="docs-heading-anchor-permalink" href="#note" title="Permalink"></a></h2><p>All the blocks that bind to a specified instrument can be middle clicked to enter catch mode. In this mode, the icon is  red and the data obtained will be a &quot;&quot; when an error occurs. For ReadingBlock, QueryBlock and ReadBlock, middle clicking at the region used to input marks will change the mode from normal to observable to observable and readable. In  observable mode, the mark region is cyan and the obtained data will be stored in a variable named by the input marks and will not be stored in file. In observable and readable region, the mark region is red, all same as observable mode but the obtained data will stored in file. For ReadingBlock, WriteBlock, QueryBlock and ReadBlock, clicking on the block border will enter the async mode. In this mode, block border is green and the generated codes will be marked by @async, this almost always speeds up the measurement.</p><h2 id="Example"><a class="docs-heading-anchor" href="#Example">Example</a><a id="Example-1"></a><a class="docs-heading-anchor-permalink" href="#Example" title="Permalink"></a></h2><p><img src="assets/example%20script.png" alt="image"/></p><p>This panel includes a title of the editing task, a &quot;HOLD&quot; checkbox to set the panel no-close when selected, an inputable region to record something necessary, a button &quot;刷新仪器列表&quot; with the same functionality as previous menu, an &quot;Edit&quot; or  &quot;View&quot; checkbox to change the editing mode and finally a region to write your own script.</p><p>This script includes two loop structures. The outter one is constructed by a StrideCodeBlock with code</p><pre><code class="language-julia hljs">@progress for i in 1:2</code></pre><p>on it. The macro @progress is used to show a progressbar. The inner one is constructed by a SweepBlock. It relates to the instrument VirtualInstr with address VirtualAddress, variable &quot;扫描测试&quot;, step 1 μA, destination 200 μA and delay  0.1s for each loop.</p><h2 id="plot-data"><a class="docs-heading-anchor" href="#plot-data">plot data</a><a id="plot-data-1"></a><a class="docs-heading-anchor-permalink" href="#plot-data" title="Permalink"></a></h2><p><img src="assets/select%20plot.png" alt="image"/></p><p>One can right click at the blank region to select plots to show.</p><p><img src="assets/select%20data%20plot.png" alt="image"/></p><p>The data used to plot includes four dimensions X Y Z W. X Y Z is regular dimensions and W is used to be calculated with others. To plot a heatmap, a matrix is necessay but the stored data format is as a vector so that it has to be specified the dimensions of the Z plotting matrix and reverse it in dimension 1 or 2. At the bottom region, one can do some simple data processing, and the selected data have bind to variables x, ys, z, ws. For Y and W dimension, they relate to variables ys and ws respectively and can be accessed by index. For convenience, ys[1] and ws[1] is simply y and w.</p><p>One can middle click or right click at the plot region to find more options.</p><h1 id="Data-Reviewing"><a class="docs-heading-anchor" href="#Data-Reviewing">Data Reviewing</a><a id="Data-Reviewing-1"></a><a class="docs-heading-anchor-permalink" href="#Data-Reviewing" title="Permalink"></a></h1><p>Click on &quot;文件 -&gt; &quot;打开文件&quot;(&quot;打开文件夹&quot;) to open saved files. Here One can review the content stored in the file includes the states of instruments, the script, the circuit, the data and the plots. Right click on the tabbar &quot;绘图&quot; can modify the plots.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../">« Home</a><a class="docs-footer-nextpage" href="../New Instrument/">New Instrument »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.25 on <span class="colophon-date" title="Monday 24 July 2023 15:59">Monday 24 July 2023</span>. Using Julia version 1.9.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
