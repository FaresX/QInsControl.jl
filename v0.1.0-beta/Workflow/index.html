<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Workflow · QInsControl.jl</title><meta name="title" content="Workflow · QInsControl.jl"/><meta property="og:title" content="Workflow · QInsControl.jl"/><meta property="twitter:title" content="Workflow · QInsControl.jl"/><meta name="description" content="Documentation for QInsControl.jl."/><meta property="og:description" content="Documentation for QInsControl.jl."/><meta property="twitter:description" content="Documentation for QInsControl.jl."/><meta property="og:url" content="https://FaresX.github.io/QInsControl.jl/Workflow/"/><meta property="twitter:url" content="https://FaresX.github.io/QInsControl.jl/Workflow/"/><link rel="canonical" href="https://FaresX.github.io/QInsControl.jl/Workflow/"/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">QInsControl.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li class="is-active"><a class="tocitem" href>Workflow</a><ul class="internal"><li><a class="tocitem" href="#auto-detect"><span>auto-detect</span></a></li><li><a class="tocitem" href="#muanully-add"><span>muanully add</span></a></li><li class="toplevel"><a class="tocitem" href="#Control-the-Instruments"><span>Control the Instruments</span></a></li><li><a class="tocitem" href="#sweep"><span>sweep</span></a></li><li><a class="tocitem" href="#set"><span>set</span></a></li><li><a class="tocitem" href="#read"><span>read</span></a></li><li class="toplevel"><a class="tocitem" href="#Data-Acquiring"><span>Data Acquiring</span></a></li><li><a class="tocitem" href="#Edit-circuit"><span>Edit circuit</span></a></li><li><a class="tocitem" href="#Edit-script"><span>Edit script</span></a></li><li><a class="tocitem" href="#note"><span>note</span></a></li><li><a class="tocitem" href="#Example"><span>Example</span></a></li><li><a class="tocitem" href="#plot-data"><span>plot data</span></a></li><li><a class="tocitem" href="#project"><span>project</span></a></li><li class="toplevel"><a class="tocitem" href="#Data-Reviewing"><span>Data Reviewing</span></a></li></ul></li><li><a class="tocitem" href="../New Instrument/">New Instrument</a></li><li><a class="tocitem" href="../QInsControlCore/">QInsControlCore</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Workflow</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Workflow</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/FaresX/QInsControl.jl/blob/master/docs/src/Workflow.md#" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Add-Instruments"><a class="docs-heading-anchor" href="#Add-Instruments">Add Instruments</a><a id="Add-Instruments-1"></a><a class="docs-heading-anchor-permalink" href="#Add-Instruments" title="Permalink"></a></h1><h2 id="auto-detect"><a class="docs-heading-anchor" href="#auto-detect">auto-detect</a><a id="auto-detect-1"></a><a class="docs-heading-anchor-permalink" href="#auto-detect" title="Permalink"></a></h2><p>One can click on <strong>Auto Search</strong> to auto-detect the available instruments in NI MAX. </p><p><img src="../assetsup/auto-detect.png" alt="image"/></p><h2 id="muanully-add"><a class="docs-heading-anchor" href="#muanully-add">muanully add</a><a id="muanully-add-1"></a><a class="docs-heading-anchor-permalink" href="#muanully-add" title="Permalink"></a></h2><p>Or manually add an instrument through clicking on <strong>Manual Input</strong> after filling the address and clicking on <strong>Add</strong> in the end. For an instrument that supports TCP/IP protocol, address has to be in the form of <strong>TCPIP::<span>$</span>IP::<span>$</span>PORT::SOCKET</strong>.</p><p><img src="../assetsup/manually-add.png" alt="image"/></p><h1 id="Control-the-Instruments"><a class="docs-heading-anchor" href="#Control-the-Instruments">Control the Instruments</a><a id="Control-the-Instruments-1"></a><a class="docs-heading-anchor-permalink" href="#Control-the-Instruments" title="Permalink"></a></h1><p>Once adding instruments finishes, one can click <strong>Instrument Settings and Status</strong> to query the status of specific instrument or set it. The controllable variables are classified by three types: sweep, set, read. </p><h2 id="sweep"><a class="docs-heading-anchor" href="#sweep">sweep</a><a id="sweep-1"></a><a class="docs-heading-anchor-permalink" href="#sweep" title="Permalink"></a></h2><p>For the sweepable variables, it can be swept from the present value to the given value with definite step size and delay.</p><p><img src="../assetsup/control-sweep.png" alt="image"/></p><h2 id="set"><a class="docs-heading-anchor" href="#set">set</a><a id="set-1"></a><a class="docs-heading-anchor-permalink" href="#set" title="Permalink"></a></h2><p>For the settable variables, it can be set by the given value through inputing or simply clicking on a pre-defined optional  value.</p><p><img src="../assetsup/control-set.png" alt="image"/></p><h2 id="read"><a class="docs-heading-anchor" href="#read">read</a><a id="read-1"></a><a class="docs-heading-anchor-permalink" href="#read" title="Permalink"></a></h2><p>For the readable variables, it can be only queried.</p><p><img src="../assetsup/control-read.png" alt="image"/></p><p>All these variables support selecting unit and whether it will auto update the state itself.</p><h1 id="Data-Acquiring"><a class="docs-heading-anchor" href="#Data-Acquiring">Data Acquiring</a><a id="Data-Acquiring-1"></a><a class="docs-heading-anchor-permalink" href="#Data-Acquiring" title="Permalink"></a></h1><p>Clicking on <strong>Instrument</strong> -&gt; <strong>Data Acquiring</strong> to do data acquiring</p><p><img src="../assetsup/DAQ.png" alt="image"/></p><p><strong>Workplace</strong> : select root folder for saving data. Data will be stored as</p><pre><code class="nohighlight hljs">root folder/year/month/day/[time] task name.qdt</code></pre><p><strong>Task 1</strong> : represent a task script to aquire data. One can click it to edit the script or right click for more options.</p><p><strong>microchip</strong> : click it to edit circuit for recording measurement configuration.</p><p><strong>Run All</strong> : run all the available tasks in a top-down order</p><p><strong>Pause</strong> : suspend the running task</p><p><strong>Interrupt</strong> : stop the running task</p><h2 id="Edit-circuit"><a class="docs-heading-anchor" href="#Edit-circuit">Edit circuit</a><a id="Edit-circuit-1"></a><a class="docs-heading-anchor-permalink" href="#Edit-circuit" title="Permalink"></a></h2><p><img src="../assetsup/circuit.png" alt="image"/> QInsControl provides a simple record manner for circuit in an experiment. For a samplebase, one can right click to load a sample image and then add some pins to match the real configuration and these pins can be dragged to the position in demand. For other nodes, one can easily right click to add or modify to satisfy the specified requirements.</p><h2 id="Edit-script"><a class="docs-heading-anchor" href="#Edit-script">Edit script</a><a id="Edit-script-1"></a><a class="docs-heading-anchor-permalink" href="#Edit-script" title="Permalink"></a></h2><p>For writing a script with convenience and universality, QInsControl provides several blocks to do this. In general, it is easy to writing an available script with only SweepBlocks and ReadingBlocks. For example</p><p><img src="../assetsup/example-easyscript.png" alt="image"/></p><p>Here, I drive <strong>A输出电流</strong> of a <strong>K2612</strong> with address <strong>address</strong> (not specified) from its present value to -100 nA with a step 1 nA and a delay 0.1 s. Then, with the same method I drive it to 100 nA. In this process, for each value I drived to I get a reading from two <strong>LI5650</strong> with different address (not specified here). One datum of <strong>DATA</strong> is in the form of &quot;data1,data2&quot; which can be indexed by <strong>1:2</strong> and assigned to two keys <strong>Ix</strong> and <strong>Iy</strong> (or <strong>Vx</strong> and <strong>Vy</strong>). By the way, two ReadingBlocks with green borders means annotation <strong>@async</strong> for faster reading.</p><h3 id="CodeBlock"><a class="docs-heading-anchor" href="#CodeBlock">CodeBlock</a><a id="CodeBlock-1"></a><a class="docs-heading-anchor-permalink" href="#CodeBlock" title="Permalink"></a></h3><p><img src="../assetsup/CodeBlock.png" alt="image"/></p><p>It can be input with any julia codes. It is helpful when dealing with complicated relation between variables and it supports all the grammar of julia language.</p><h3 id="StrideCodeBlock"><a class="docs-heading-anchor" href="#StrideCodeBlock">StrideCodeBlock</a><a id="StrideCodeBlock-1"></a><a class="docs-heading-anchor-permalink" href="#StrideCodeBlock" title="Permalink"></a></h3><p><img src="../assetsup/StrideCodeBlock.png" alt="image"/></p><p>It is similar to CodeBlock, but it can only be input a block title codes such as <em>for end</em>, <em>begin end</em>, <em>function end</em> and so on. It is used to combine block codes in julia with other blocks in QInsControl. Middle click on its icon disables its handler which is used for pausing and interrupting.</p><h3 id="BranchBlock"><a class="docs-heading-anchor" href="#BranchBlock">BranchBlock</a><a id="BranchBlock-1"></a><a class="docs-heading-anchor-permalink" href="#BranchBlock" title="Permalink"></a></h3><p><img src="../assetsup/BranchBlock.png" alt="image"/></p><p>It is only used inside a StrideCodeBlock to be complete. For example, it can be filled with <em>else</em>, <em>catch</em> and so on.</p><h3 id="SweepBlock"><a class="docs-heading-anchor" href="#SweepBlock">SweepBlock</a><a id="SweepBlock-1"></a><a class="docs-heading-anchor-permalink" href="#SweepBlock" title="Permalink"></a></h3><p><img src="../assetsup/SweepBlock.png" alt="image"/></p><p>It is used to sweep a sweepable quantity. One can click to select the specific instrument, address and quantity and input step, destination and delay. A sweepable quantity is generally dimensioned and one have to make sure that a  correct unit is selected.</p><h3 id="SettingBlock"><a class="docs-heading-anchor" href="#SettingBlock">SettingBlock</a><a id="SettingBlock-1"></a><a class="docs-heading-anchor-permalink" href="#SettingBlock" title="Permalink"></a></h3><p><img src="../assetsup/SettingBlock.png" alt="image"/></p><p>Similar to SweepBlock but for a settable quantity (a sweepable quantity is also a settable quantity). One can input a string or a number dependent on the unit. When unit type is none, it only supports a string input and a &quot;$(Expr(:incomplete, &quot;incomplete: invalid string syntax&quot;))</p><h3 id="ReadingBlock"><a class="docs-heading-anchor" href="#ReadingBlock">ReadingBlock</a><a id="ReadingBlock-1"></a><a class="docs-heading-anchor-permalink" href="#ReadingBlock" title="Permalink"></a></h3><p><img src="../assetsup/ReadingBlock.png" alt="image"/></p><p><em>Index</em> is used to split the data by &quot;,&quot;. When data do not include delimiter, leave it blank. <em>mark</em> is used to name the  recorded data. When data format includes delimiter, one can use &quot;,&quot; to seperate multiple marks which is also unnecessary.</p><h3 id="LogBlock"><a class="docs-heading-anchor" href="#LogBlock">LogBlock</a><a id="LogBlock-1"></a><a class="docs-heading-anchor-permalink" href="#LogBlock" title="Permalink"></a></h3><p><img src="../assetsup/LogBlock.png" alt="image"/></p><p>When it is executed, all the available instruments will be logged. (before and after script runing, a logging action  will happen, so it is not necessary to add this block in the first and last line of a script)   (this block has been removed in recent versions, please just use</p><pre><code class="language-julia hljs">@logblock</code></pre><p>in a CodeBlock instead.)</p><h3 id="WriteBlock"><a class="docs-heading-anchor" href="#WriteBlock">WriteBlock</a><a id="WriteBlock-1"></a><a class="docs-heading-anchor-permalink" href="#WriteBlock" title="Permalink"></a></h3><p><img src="../assetsup/WriteBlock.png" alt="image"/></p><p>Input the command and write to the specified instrument.</p><h3 id="QueryBlock"><a class="docs-heading-anchor" href="#QueryBlock">QueryBlock</a><a id="QueryBlock-1"></a><a class="docs-heading-anchor-permalink" href="#QueryBlock" title="Permalink"></a></h3><p><img src="../assetsup/QueryBlock.png" alt="image"/></p><p>Input the command and query the specified instrument.</p><h3 id="ReadBlock"><a class="docs-heading-anchor" href="#ReadBlock">ReadBlock</a><a id="ReadBlock-1"></a><a class="docs-heading-anchor-permalink" href="#ReadBlock" title="Permalink"></a></h3><p><img src="../assetsup/ReadBlock.png" alt="image"/></p><p>Read the specified instrument.</p><h3 id="SaveBlock"><a class="docs-heading-anchor" href="#SaveBlock">SaveBlock</a><a id="SaveBlock-1"></a><a class="docs-heading-anchor-permalink" href="#SaveBlock" title="Permalink"></a></h3><p><img src="../assetsup/SaveBlock.png" alt="image"/></p><p>It is used to save a variable defined in the context. <em>mark</em> is an optional input to specify the name to be stored. When it is blank, the name will be the same as the variable.   (this block has been removed in recent versions, please just use </p><pre><code class="language-julia hljs">@saveblock key var # or @saveblock var</code></pre><p>in a CodeBlock instead.)</p><h2 id="note"><a class="docs-heading-anchor" href="#note">note</a><a id="note-1"></a><a class="docs-heading-anchor-permalink" href="#note" title="Permalink"></a></h2><p>All the blocks that bind to a specified instrument can be middle clicked to enter catch mode. In this mode, the icon is  red and the data obtained will be a &quot;&quot; when an error occurs. For ReadingBlock, QueryBlock and ReadBlock, middle clicking at the region used to input marks will change the mode from normal to observable to observable and readable. In  observable mode, the mark region is cyan and the obtained data will be stored in a variable named by the input marks and will not be stored in file. In observable and readable region, the mark region is red, all same as observable mode but the obtained data will stored in file. For ReadingBlock, WriteBlock, QueryBlock and ReadBlock, clicking on the block border will enter the async mode. In this mode, block border is green and the generated codes will be marked by @async, this almost always speeds up the measurement. Different mode has different color indicator which can be found in <strong>File</strong> -&gt; <strong>Preferences</strong> -&gt; <strong>Style</strong> -&gt; <strong>More Style</strong>. Furthermore, this editor supports dragging to reorder blocks and a Ctrl down to dragging a block into a StrideCodeBlock or SweepBlock.</p><h2 id="Example"><a class="docs-heading-anchor" href="#Example">Example</a><a id="Example-1"></a><a class="docs-heading-anchor-permalink" href="#Example" title="Permalink"></a></h2><p><img src="../assetsup/example-script.png" alt="image"/></p><p>This panel includes a title of the editing task, a <strong>HOLD</strong> checkbox to set the panel no-close when selected, an inputable region to record something necessary, a button <strong>Refresh Instrument list</strong> with the same functionality as previous menu, an <strong>Edit</strong> or  <strong>View</strong> checkbox to change the editing mode and finally a region to write your own script.</p><p>This script includes two loop structures. The outter one is constructed by a StrideCodeBlock with code</p><pre><code class="language-julia hljs">@progress for i in 1:2</code></pre><p>on it. The macro @progress is used to show a progressbar. The inner one is constructed by a SweepBlock. It relates to the instrument VirtualInstr with address VirtualAddress, variable <strong>JJ I</strong>, step 1 μA, destination 200 μA and delay  0.1s for each loop.</p><p>In general, it is unnecessary to write such a complicated script. Most of them are used to support special demands and ensure universality.</p><h2 id="plot-data"><a class="docs-heading-anchor" href="#plot-data">plot data</a><a id="plot-data-1"></a><a class="docs-heading-anchor-permalink" href="#plot-data" title="Permalink"></a></h2><p><img src="../assetsup/select-plot.png" alt="image"/></p><p>One can right click at blank region to select plots to show.</p><p><img src="../assetsup/select-data-plot.png" alt="image"/></p><p>The data used to plot includes four dimensions X Y Z W. X Y Z is regular dimensions and W is used to be calculated with others. To plot a heatmap, a matrix is necessay but the stored data format is as a vector so that it has to be specified the dimensions of the Z plotting matrix and reverse it in dimension 1 or 2. At the bottom region, one can do some simple data processing, and the selected data have bind to variables x, ys, z, ws. For Y and W dimension, they relate to variables ys and ws respectively and can be accessed by index. For convenience, ys[1] and ws[1] is simply y and w.</p><p>One can middle click or right click at plot region to find more options.</p><h2 id="project"><a class="docs-heading-anchor" href="#project">project</a><a id="project-1"></a><a class="docs-heading-anchor-permalink" href="#project" title="Permalink"></a></h2><p>All elements above together make up one project. One can save and load a project to conveniently reuse scripts, circuit, and plots. One example file <a href="https://github.com/FaresX/QInsControl.jl/tree/master/example">demo.daq</a> can be found in example folder.</p><h1 id="Data-Reviewing"><a class="docs-heading-anchor" href="#Data-Reviewing">Data Reviewing</a><a id="Data-Reviewing-1"></a><a class="docs-heading-anchor-permalink" href="#Data-Reviewing" title="Permalink"></a></h1><p>Click on <strong>File</strong> -&gt; <strong>Open File</strong> (<strong>Open Folder</strong>) to open saved files. Here One can review the content stored in the file includes the states of instruments, the script, the circuit, the data and the plots. Right click on the tabbar <strong>Plots</strong> can modify the plots. <img src="../assetsup/data-review.png" alt="image"/></p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../">« Home</a><a class="docs-footer-nextpage" href="../New Instrument/">New Instrument »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="auto">Automatic (OS)</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.0.1 on <span class="colophon-date" title="Tuesday 27 February 2024 15:15">Tuesday 27 February 2024</span>. Using Julia version 1.9.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
